import forecastReducer, {
  ForecastState,
  updateForecastData,
} from "./forecastSlice"

describe("forecast reducer", () => {
  const initialState: ForecastState = {
    latitude: 0,
    longitude: 0,
    generationtime_ms: 0,
    utc_offset_seconds: 0,
    timezone: "",
    timezone_abbreviation: "",
    elevation: 0,
    hourly_units: {
      time: "",
      temperature_2m: "",
      relativehumidity_2m: "",
      precipitation: "",
      cloudcover: "",
      windspeed_10m: "",
      winddirection_10m: "",
    },
    hourly: {
      time: [],
      temperature_2m: [],
      relativehumidity_2m: [],
      precipitation: [],
      cloudcover: [],
      windspeed_10m: [],
      winddirection_10m: [],
    },
    daily_units: {
      time: "",
      weathercode: "",
      temperature_2m_max: "",
      temperature_2m_min: "",
    },
    daily: {
      time: [],
      weathercode: [],
      temperature_2m_max: [],
      temperature_2m_min: [],
    },
    status: "idle",
  }

  const newState: ForecastState = {
    latitude: 27,
    longitude: 37,
    generationtime_ms: 8.310914039611816,
    utc_offset_seconds: 10800,
    timezone: "Asia/Riyadh",
    timezone_abbreviation: "+03",
    elevation: 1044,
    hourly_units: {
      time: "iso8601",
      temperature_2m: "°C",
      relativehumidity_2m: "%",
      precipitation: "mm",
      cloudcover: "%",
      windspeed_10m: "km/h",
      winddirection_10m: "°",
    },
    hourly: {
      time: [
        "2023-10-24T00:00",
        "2023-10-24T01:00",
        "2023-10-24T02:00",
        "2023-10-24T03:00",
        "2023-10-24T04:00",
        "2023-10-24T05:00",
        "2023-10-24T06:00",
        "2023-10-24T07:00",
        "2023-10-24T08:00",
        "2023-10-24T09:00",
        "2023-10-24T10:00",
        "2023-10-24T11:00",
        "2023-10-24T12:00",
        "2023-10-24T13:00",
        "2023-10-24T14:00",
        "2023-10-24T15:00",
        "2023-10-24T16:00",
        "2023-10-24T17:00",
        "2023-10-24T18:00",
        "2023-10-24T19:00",
        "2023-10-24T20:00",
        "2023-10-24T21:00",
        "2023-10-24T22:00",
        "2023-10-24T23:00",
        "2023-10-25T00:00",
        "2023-10-25T01:00",
        "2023-10-25T02:00",
        "2023-10-25T03:00",
        "2023-10-25T04:00",
        "2023-10-25T05:00",
        "2023-10-25T06:00",
        "2023-10-25T07:00",
        "2023-10-25T08:00",
        "2023-10-25T09:00",
        "2023-10-25T10:00",
        "2023-10-25T11:00",
        "2023-10-25T12:00",
        "2023-10-25T13:00",
        "2023-10-25T14:00",
        "2023-10-25T15:00",
        "2023-10-25T16:00",
        "2023-10-25T17:00",
        "2023-10-25T18:00",
        "2023-10-25T19:00",
        "2023-10-25T20:00",
        "2023-10-25T21:00",
        "2023-10-25T22:00",
        "2023-10-25T23:00",
        "2023-10-26T00:00",
        "2023-10-26T01:00",
        "2023-10-26T02:00",
        "2023-10-26T03:00",
        "2023-10-26T04:00",
        "2023-10-26T05:00",
        "2023-10-26T06:00",
        "2023-10-26T07:00",
        "2023-10-26T08:00",
        "2023-10-26T09:00",
        "2023-10-26T10:00",
        "2023-10-26T11:00",
        "2023-10-26T12:00",
        "2023-10-26T13:00",
        "2023-10-26T14:00",
        "2023-10-26T15:00",
        "2023-10-26T16:00",
        "2023-10-26T17:00",
        "2023-10-26T18:00",
        "2023-10-26T19:00",
        "2023-10-26T20:00",
        "2023-10-26T21:00",
        "2023-10-26T22:00",
        "2023-10-26T23:00",
        "2023-10-27T00:00",
        "2023-10-27T01:00",
        "2023-10-27T02:00",
        "2023-10-27T03:00",
        "2023-10-27T04:00",
        "2023-10-27T05:00",
        "2023-10-27T06:00",
        "2023-10-27T07:00",
        "2023-10-27T08:00",
        "2023-10-27T09:00",
        "2023-10-27T10:00",
        "2023-10-27T11:00",
        "2023-10-27T12:00",
        "2023-10-27T13:00",
        "2023-10-27T14:00",
        "2023-10-27T15:00",
        "2023-10-27T16:00",
        "2023-10-27T17:00",
        "2023-10-27T18:00",
        "2023-10-27T19:00",
        "2023-10-27T20:00",
        "2023-10-27T21:00",
        "2023-10-27T22:00",
        "2023-10-27T23:00",
        "2023-10-28T00:00",
        "2023-10-28T01:00",
        "2023-10-28T02:00",
        "2023-10-28T03:00",
        "2023-10-28T04:00",
        "2023-10-28T05:00",
        "2023-10-28T06:00",
        "2023-10-28T07:00",
        "2023-10-28T08:00",
        "2023-10-28T09:00",
        "2023-10-28T10:00",
        "2023-10-28T11:00",
        "2023-10-28T12:00",
        "2023-10-28T13:00",
        "2023-10-28T14:00",
        "2023-10-28T15:00",
        "2023-10-28T16:00",
        "2023-10-28T17:00",
        "2023-10-28T18:00",
        "2023-10-28T19:00",
        "2023-10-28T20:00",
        "2023-10-28T21:00",
        "2023-10-28T22:00",
        "2023-10-28T23:00",
        "2023-10-29T00:00",
        "2023-10-29T01:00",
        "2023-10-29T02:00",
        "2023-10-29T03:00",
        "2023-10-29T04:00",
        "2023-10-29T05:00",
        "2023-10-29T06:00",
        "2023-10-29T07:00",
        "2023-10-29T08:00",
        "2023-10-29T09:00",
        "2023-10-29T10:00",
        "2023-10-29T11:00",
        "2023-10-29T12:00",
        "2023-10-29T13:00",
        "2023-10-29T14:00",
        "2023-10-29T15:00",
        "2023-10-29T16:00",
        "2023-10-29T17:00",
        "2023-10-29T18:00",
        "2023-10-29T19:00",
        "2023-10-29T20:00",
        "2023-10-29T21:00",
        "2023-10-29T22:00",
        "2023-10-29T23:00",
        "2023-10-30T00:00",
        "2023-10-30T01:00",
        "2023-10-30T02:00",
        "2023-10-30T03:00",
        "2023-10-30T04:00",
        "2023-10-30T05:00",
        "2023-10-30T06:00",
        "2023-10-30T07:00",
        "2023-10-30T08:00",
        "2023-10-30T09:00",
        "2023-10-30T10:00",
        "2023-10-30T11:00",
        "2023-10-30T12:00",
        "2023-10-30T13:00",
        "2023-10-30T14:00",
        "2023-10-30T15:00",
        "2023-10-30T16:00",
        "2023-10-30T17:00",
        "2023-10-30T18:00",
        "2023-10-30T19:00",
        "2023-10-30T20:00",
        "2023-10-30T21:00",
        "2023-10-30T22:00",
        "2023-10-30T23:00",
      ],
      temperature_2m: [
        21.6, 21.2, 20.7, 20.3, 21.1, 20.8, 20.6, 20.4, 21.1, 23.3, 26.2, 29,
        30, 30, 29.9, 29.5, 28.7, 27.8, 26.6, 24.9, 23.6, 22.6, 21.9, 21.4,
        21.5, 21.3, 21, 20.8, 20.5, 20.2, 20, 19.8, 20.6, 22.6, 25.1, 27.6,
        29.7, 30.6, 31.1, 31.1, 30.4, 29.4, 27.8, 25.8, 24.4, 23.2, 22.4, 22.6,
        22.7, 22.5, 22.2, 21.9, 21.6, 21.3, 21, 20.8, 21.2, 23.2, 25.9, 28.7,
        30.9, 31.7, 31.9, 31.5, 30.5, 29.4, 28.4, 27.1, 25.6, 24.6, 24, 23.6,
        22.8, 22.3, 21.8, 21.3, 20.9, 20.6, 20.3, 20.1, 20.8, 23.5, 27.5, 29.5,
        30.3, 30.9, 31.1, 30.3, 29.5, 27.5, 25, 22.1, 21.2, 21.1, 21.1, 20.6,
        20.3, 20.3, 20.2, 20.8, 20.7, 20.8, 20.9, 21, 21.5, 22.5, 25.7, 27.5,
        28.7, 29.1, 28.8, 28.4, 27.8, 27, 26.2, 25.4, 24.6, 23.9, 23.5, 23.3,
        23, 22.8, 22.5, 22.4, 22.2, 22, 22.2, 22.7, 23.6, 24.5, 25.4, 26.3, 27,
        27.6, 28.1, 27.7, 25.9, 23.4, 21.6, 21.1, 21.4, 21.9, 22.8, 24, 24.7,
        24.5, 24, 23.3, 22.7, 22, 21.6, 21.9, 22.5, 23.2, 23.8, 24.4, 25.1,
        25.7, 26.4, 26.7, 26.6, 26.2, 25.6, 24.8, 23.8, 23, 22.4, 21.9,
      ],
      relativehumidity_2m: [
        51, 52, 53, 49, 43, 41, 41, 42, 40, 33, 28, 22, 21, 21, 22, 24, 28, 30,
        32, 36, 39, 42, 44, 45, 44, 44, 44, 44, 44, 45, 46, 46, 44, 38, 32, 28,
        23, 20, 18, 17, 18, 19, 22, 26, 29, 31, 34, 41, 42, 43, 43, 42, 41, 41,
        43, 44, 42, 37, 29, 23, 18, 17, 16, 18, 19, 20, 23, 28, 31, 34, 35, 36,
        37, 39, 39, 41, 41, 42, 42, 41, 39, 34, 29, 25, 22, 21, 22, 23, 26, 35,
        46, 69, 78, 81, 73, 71, 70, 70, 72, 66, 64, 65, 62, 59, 55, 51, 42, 36,
        32, 31, 33, 35, 37, 40, 43, 46, 49, 52, 53, 54, 54, 55, 56, 56, 55, 53,
        51, 47, 43, 39, 35, 31, 28, 24, 20, 23, 39, 61, 77, 82, 81, 75, 63, 46,
        34, 31, 33, 35, 37, 39, 40, 39, 37, 36, 36, 36, 35, 32, 29, 26, 25, 24,
        24, 25, 27, 28, 28, 28,
      ],
      precipitation: [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0.3, 0.7, 0.3,
        0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.1, 0.1, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0,
      ],
      cloudcover: [
        1, 0, 0, 0, 3, 1, 5, 15, 13, 0, 3, 11, 24, 19, 11, 45, 65, 1, 1, 0, 0,
        0, 0, 1, 1, 0, 3, 2, 0, 0, 0, 0, 1, 1, 2, 1, 21, 5, 8, 7, 0, 0, 0, 3, 0,
        5, 0, 0, 1, 5, 5, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 43, 78, 84, 55,
        45, 28, 35, 53, 18, 0, 9, 3, 1, 4, 5, 1, 1, 0, 0, 2, 21, 2, 10, 31, 37,
        55, 83, 93, 97, 93, 100, 94, 59, 62, 76, 91, 100, 100, 100, 100, 99, 93,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 94, 87, 81, 72, 63,
        54, 69, 85, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 97, 94,
        91, 78, 64, 51, 57, 63, 69, 73, 77, 81, 62, 44, 25, 31, 36, 42, 44, 45,
      ],
      windspeed_10m: [
        5.9, 8.4, 11.3, 16.1, 16.5, 15.2, 16.1, 16.1, 15.7, 12.5, 10.8, 6.5,
        14.8, 15.5, 16.6, 17.1, 16.4, 14.8, 11.7, 6.2, 2.4, 3.4, 7.6, 10, 10.8,
        13.2, 13.6, 14.8, 14.4, 15.2, 15.7, 16, 15.7, 14.3, 11.8, 5.8, 4.7, 7.7,
        11.9, 14.3, 13.9, 11.4, 8.5, 4, 0.7, 3.8, 8.6, 14, 17.3, 15.8, 15.7,
        15.9, 15.7, 16.4, 16.7, 16.7, 16.1, 16.1, 14.3, 8.4, 9.7, 12.1, 14.7,
        16.3, 15, 12.2, 10.9, 9.2, 5.9, 3.3, 2.3, 5.6, 7.4, 9.8, 11.7, 12.5, 13,
        13.6, 14.6, 15.6, 15.3, 11.8, 10, 9.7, 10.9, 12.7, 16.3, 16, 16.7, 13.2,
        11.7, 2.8, 8.3, 9.2, 13.5, 12, 12.1, 10.6, 11.8, 12.7, 11.6, 11.6, 13.9,
        16.3, 15, 16.1, 4.7, 6.5, 13.5, 15.3, 14.7, 13, 10.5, 7.3, 5.4, 5.5,
        6.8, 8.7, 9.9, 10.2, 10.7, 11.1, 10.7, 11.2, 12, 13, 13.8, 14.5, 14.8,
        14.1, 12.9, 13.5, 15.3, 16.3, 16.2, 15, 12.3, 11.6, 11.3, 6.2, 3.4, 10,
        13, 14.4, 14.9, 14.8, 14, 13.6, 12.8, 12, 11.8, 13.4, 16.2, 18.8, 19.4,
        18.7, 18.4, 18.6, 18.7, 18.4, 16.5, 13.8, 12.2, 12.4, 13.7, 14.7, 14.8,
        14.4,
      ],
      winddirection_10m: [
        38, 40, 37, 40, 44, 36, 34, 34, 37, 41, 64, 180, 225, 234, 229, 229,
        230, 231, 236, 234, 207, 58, 45, 52, 53, 45, 40, 39, 37, 36, 37, 36, 37,
        39, 52, 86, 189, 221, 235, 242, 249, 257, 258, 270, 90, 49, 33, 44, 48,
        45, 37, 33, 32, 33, 33, 33, 29, 39, 43, 97, 180, 217, 245, 245, 235,
        225, 224, 222, 218, 167, 72, 27, 39, 36, 43, 41, 39, 40, 38, 38, 41, 40,
        120, 153, 189, 223, 235, 239, 237, 225, 223, 50, 18, 31, 42, 33, 37, 28,
        40, 55, 30, 30, 25, 35, 44, 48, 67, 199, 209, 207, 202, 194, 186, 169,
        138, 101, 72, 60, 57, 58, 57, 54, 50, 48, 46, 46, 47, 48, 51, 58, 77,
        106, 124, 135, 143, 153, 175, 210, 233, 249, 18, 41, 39, 37, 37, 41, 46,
        50, 50, 49, 52, 66, 78, 86, 90, 92, 96, 99, 101, 102, 101, 99, 92, 82,
        72, 65, 61, 58,
      ],
    },
    daily_units: {
      time: "iso8601",
      weathercode: "wmo code",
      temperature_2m_max: "°C",
      temperature_2m_min: "°C",
    },
    daily: {
      time: [
        "2023-10-24",
        "2023-10-25",
        "2023-10-26",
        "2023-10-27",
        "2023-10-28",
        "2023-10-29",
        "2023-10-30",
      ],
      weathercode: [2, 1, 3, 53, 51, 3, 3],
      temperature_2m_max: [30, 31.1, 31.9, 31.1, 29.1, 28.1, 26.7],
      temperature_2m_min: [20.3, 19.8, 20.8, 20.1, 20.2, 21.1, 21.6],
    },
    status: "loaded",
  }

  it("should handle initial state", () => {
    expect(forecastReducer(undefined, { type: "unknown" })).toEqual(
      initialState,
    )
  })

  it("should handle updateForecastData", () => {
    const actual = forecastReducer(initialState, updateForecastData(newState))
    expect(JSON.stringify(actual)).toEqual(JSON.stringify(newState))
  })
})
